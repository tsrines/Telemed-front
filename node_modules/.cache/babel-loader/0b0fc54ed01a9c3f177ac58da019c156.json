{"ast":null,"code":"import React from 'react';\nimport axios from 'axios';\nexport const fetchApiDoctors = async payload => {\n  debugger;\n\n  try {\n    let res = await axios.post(`http://localhost:3000/doctors`, payload);\n    debugger;\n  } catch (err) {\n    console.log('This is your error:', err);\n    throw err;\n  }\n};\nexport const createDoctors = async (incomingDoctors, query) => {\n  const dockers = [];\n  await incomingDoctors.forEach(async doctor => {\n    let finalDoc;\n    let createdReviews;\n    let createdPhotos;\n\n    try {\n      finalDoc = await createDoctor(doctor, query);\n    } catch (err) {\n      console.log(err);\n      throw err;\n    }\n\n    try {\n      createdReviews = await createReviews(finalDoc);\n      finalDoc.reviews = createdReviews;\n    } catch (error) {}\n\n    try {\n      createdPhotos = await createPhotos(finalDoc);\n      finalDoc.photos = createdPhotos;\n    } catch (error) {}\n\n    dockers.push(finalDoc);\n  });\n  return dockers;\n};\n\nconst createDoctor = async singleDoctor => {\n  let detailedDoctor;\n  let doctorFromBackend;\n\n  try {\n    let res = await axios.get(`http://localhost:3000/geocodes/details/${singleDoctor.place_id}`);\n    detailedDoctor = res.data.result;\n  } catch (err) {\n    console.log(err, 'FROM CREATEDOCTORS HELPER');\n    throw err;\n  }\n\n  const {\n    formatted_address,\n    formatted_phone_number,\n    name,\n    place_id,\n    rating,\n    url,\n    website,\n    user_ratings_total,\n    reviews,\n    photos,\n    geometry: {\n      location: {\n        lat,\n        lng\n      }\n    }\n  } = detailedDoctor; // ES6 key value assignment operator\n\n  const doctorHash = {\n    place_id,\n    name,\n    formatted_address,\n    rating,\n    user_ratings_total,\n    formatted_phone_number,\n    lat,\n    lng,\n    url,\n    website,\n    photos,\n    reviews\n  };\n\n  try {\n    let res = await axios.post('http://localhost:3000/doctors', doctorHash);\n    doctorFromBackend = res.data;\n  } catch (error) {\n    console.log('fixed?');\n  }\n\n  return doctorFromBackend;\n};\n\nexport const createReviews = async ({\n  place_id,\n  doctor_id\n}) => {\n  const reviewPayload = {\n    place_id,\n    doctor_id\n  };\n\n  try {\n    let res = await axios.post('http://localhost:3000/reviews', reviewPayload);\n    return res.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\nexport const createPhotos = async doctorFromBackend => {\n  const photoHash = {\n    doctor_id: doctorFromBackend.id,\n    doctor_reference: doctorFromBackend.place_id\n  };\n  let data;\n\n  try {\n    let res = await axios.post(`http://localhost:3000/photos`, photoHash);\n    data = res.data;\n  } catch (err) {\n    console.log(err);\n    throw err;\n  }\n\n  return data;\n};","map":{"version":3,"sources":["/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/helpers/helpers.js"],"names":["React","axios","fetchApiDoctors","payload","res","post","err","console","log","createDoctors","incomingDoctors","query","dockers","forEach","doctor","finalDoc","createdReviews","createdPhotos","createDoctor","createReviews","reviews","error","createPhotos","photos","push","singleDoctor","detailedDoctor","doctorFromBackend","get","place_id","data","result","formatted_address","formatted_phone_number","name","rating","url","website","user_ratings_total","geometry","location","lat","lng","doctorHash","doctor_id","reviewPayload","photoHash","id","doctor_reference"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nexport const fetchApiDoctors = async (payload) => {\n  debugger\n\n  try {\n    let res = await axios.post(`http://localhost:3000/doctors`, payload);\n    debugger\n\n\n  } catch (err) {\n    console.log('This is your error:', err);\n    throw err;\n  }\n\n};\n\nexport const createDoctors = async (incomingDoctors, query) => {\n  const dockers = [];\n  await incomingDoctors.forEach(async (doctor) => {\n    let finalDoc;\n    let createdReviews\n    let createdPhotos\n    try {\n      finalDoc = await createDoctor(doctor,query);\n\n    } catch (err) {\n      console.log(err);\n      throw err;\n    }\n    try {\n      \n      createdReviews = await createReviews(finalDoc);\n      finalDoc.reviews = createdReviews;\n\n    } catch (error) {\n      \n    }  \n    try {\n      \n      createdPhotos = await createPhotos(finalDoc);\n      finalDoc.photos = createdPhotos;\n    } catch (error) {\n      \n    }\n\n    dockers.push(finalDoc);\n  });\n\n  return dockers;\n};\n\nconst createDoctor = async (singleDoctor) => {\n  let detailedDoctor;\n  let doctorFromBackend;\n  try {\n    let res = await axios.get(\n      `http://localhost:3000/geocodes/details/${singleDoctor.place_id}`\n    );\n    detailedDoctor = res.data.result;\n  } catch (err) {\n    console.log(err, 'FROM CREATEDOCTORS HELPER');\n    throw err;\n  }\n\n  const {\n    formatted_address,\n    formatted_phone_number,\n    name,\n    place_id,\n    rating,\n    url,\n    website,\n    user_ratings_total,\n    reviews,\n    photos,\n    geometry: {\n      location: { lat, lng },\n    },\n  } = detailedDoctor;\n\n  // ES6 key value assignment operator\n\n  const doctorHash = {\n    place_id,\n    name,\n    formatted_address,\n    rating,\n    user_ratings_total,\n    formatted_phone_number,\n    lat,\n    lng,\n    url,\n    website,\n    photos,\n    reviews,\n  };\n\n  try {\n    let res = await axios.post('http://localhost:3000/doctors', doctorHash);\n    doctorFromBackend = res.data;\n\n\n\n  } catch (error) {\n    console.log('fixed?');\n  }\n  return doctorFromBackend\n  \n};\n\nexport const createReviews = async ({place_id, doctor_id}) => {\n  const reviewPayload = {\n    place_id,\n    doctor_id,\n  };\n\n\n  try {\n    let res = await axios.post('http://localhost:3000/reviews', reviewPayload);\n    return res.data;\n  } catch (error) {\n    console.log(error);\n    throw error;\n  }\n};\n\nexport const createPhotos = async (doctorFromBackend) => {\n  const photoHash = {\n    doctor_id: doctorFromBackend.id,\n    doctor_reference: doctorFromBackend.place_id,\n  };\n  let data;\n  try {\n    let res = await axios.post(`http://localhost:3000/photos`, photoHash);\n    data = res.data;\n  } catch (err) {\n    console.log(err);\n    throw err;\n  }\n  return data;\n};\n"]},"metadata":{},"sourceType":"module"}