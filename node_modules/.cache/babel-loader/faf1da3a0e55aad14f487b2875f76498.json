{"ast":null,"code":"import _regeneratorRuntime from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/rines/Development/code/mod5/Telemed/Telemed-front/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import{Divider,Image,Container}from'semantic-ui-react';import axios from'axios';import ShowMenu from'./ShowMenu';var DoctorShow=/*#__PURE__*/function(_React$Component){_inherits(DoctorShow,_React$Component);function DoctorShow(){var _getPrototypeOf2;var _this;_classCallCheck(this,DoctorShow);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(DoctorShow)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={favorite:0};_this.isFavorite=function(){var favorite=_this.props.currentUser.doctors.find(function(doc){return doc.id===parseInt(_this.props.match.params.id);});if(favorite)_this.setState({favorite:1});else _this.setState({favorite:0});};_this.postFavorite=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var favoriteObject,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.props.loadingHandler(true);favoriteObject={doctor_id:_this.props.match.params.id,user_id:_this.props.currentUser.id};_context.prev=2;_context.next=5;return axios.post(\"http://localhost:3000/favorites\",favoriteObject);case 5:res=_context.sent;_this.setState({favorite:1,id:res.data.id},function(){_this.props.loadUser();});_context.next=11;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);case 11:_this.props.loadingHandler(false);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));_this.deleteFavorite=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var favorite,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.props.loadingHandler(true);favorite=_this.props.currentUser.favorites.find(function(favorite){return favorite.doctor_id===parseInt(_this.props.match.params.id);});if(favorite===-1){_this.setState({favorite:0});}_context2.prev=3;_context2.next=6;return axios.delete(\"http://localhost:3000/favorites/\".concat(favorite.id));case 6:res=_context2.sent;console.log('res.data from deletefavorite',res.data);_this.setState({favorite:0},function(){_this.props.loadUser();});_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);console.log('error',_context2.t0);case 14:_this.props.loadingHandler(false);console.log('got here in delete');case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));_this.rate=function(e,_ref3){var rating=_ref3.rating;if(rating===0){_this.deleteFavorite();}else{_this.postFavorite();}};return _this;}_createClass(DoctorShow,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.props.loadingHandler(true);_context3.next=3;return this.props.getDoctorById(parseInt(this.props.match.params.id));case 3:_context3.next=5;return this.props.loadUser();case 5:this.isFavorite();this.props.loadingHandler(false);case 7:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){console.log('DOCTOR SHOW THIS.STATE: ',this.props);// debugger\nvar _this$props$doctorSho=this.props.doctorShow,reviews=_this$props$doctorSho.reviews,photos=_this$props$doctorSho.photos,photo=_this$props$doctorSho.photo;return React.createElement(Container,{style:{padding:'3em'}},React.createElement(Image,{centered:true,size:\"large\",src:photo&&photo}),React.createElement(Divider,{hidden:true}),React.createElement(ShowMenu,{loadUser:this.props.loadUser,loadingHandler:this.props.loadingHandler,loading:this.props.loading,favorite:this.state.favorite,rate:this.rate,doctor:this.props.doctorShow,reviews:reviews,photos:photos}));}}]);return DoctorShow;}(React.Component);export default DoctorShow;","map":{"version":3,"sources":["/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/components/doctorShow/DoctorShow.js"],"names":["React","Divider","Image","Container","axios","ShowMenu","DoctorShow","state","favorite","isFavorite","props","currentUser","doctors","find","doc","id","parseInt","match","params","setState","postFavorite","loadingHandler","favoriteObject","doctor_id","user_id","post","res","data","loadUser","deleteFavorite","favorites","delete","console","log","rate","e","rating","getDoctorById","doctorShow","reviews","photos","photo","padding","loading","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Divider, Image, Container } from 'semantic-ui-react';\nimport axios from 'axios';\n\nimport ShowMenu from './ShowMenu';\n\nclass DoctorShow extends React.Component {\n  state = {\n    favorite: 0,\n  };\n\n  isFavorite = () => {\n    const favorite = this.props.currentUser.doctors.find(\n      (doc) => doc.id === parseInt(this.props.match.params.id)\n    );\n\n    if (favorite) this.setState({ favorite: 1 });\n    else this.setState({ favorite: 0 });\n  };\n\n  async componentDidMount() {\n    this.props.loadingHandler(true);\n\n    await this.props.getDoctorById(parseInt(this.props.match.params.id));\n    await this.props.loadUser();\n    this.isFavorite();\n    this.props.loadingHandler(false);\n  }\n\n  postFavorite = async () => {\n    this.props.loadingHandler(true);\n\n    const favoriteObject = {\n      doctor_id: this.props.match.params.id,\n      user_id: this.props.currentUser.id,\n    };\n    try {\n      let res = await axios.post(\n        `http://localhost:3000/favorites`,\n        favoriteObject\n      );\n      this.setState({ favorite: 1, id: res.data.id }, () => {\n        this.props.loadUser();\n      });\n    } catch (error) {}\n    this.props.loadingHandler(false);\n  };\n\n  deleteFavorite = async () => {\n    this.props.loadingHandler(true);\n\n    let favorite = this.props.currentUser.favorites.find(\n      (favorite) => favorite.doctor_id === parseInt(this.props.match.params.id)\n    );\n    if (favorite === -1) {\n      this.setState({ favorite: 0 });\n    }\n    try {\n      let res = await axios.delete(\n        `http://localhost:3000/favorites/${favorite.id}`\n      );\n      console.log('res.data from deletefavorite', res.data);\n      this.setState({ favorite: 0 }, () => {\n        this.props.loadUser();\n      });\n    } catch (err) {\n      console.log('error', err);\n    }\n    this.props.loadingHandler(false);\n    console.log('got here in delete');\n  };\n\n  rate = (e, { rating }) => {\n    if (rating === 0) {\n      this.deleteFavorite();\n    } else {\n      this.postFavorite();\n    }\n  };\n\n  render() {\n    console.log('DOCTOR SHOW THIS.STATE: ', this.props);\n    // debugger\n    const { reviews, photos, photo } = this.props.doctorShow;\n\n    return (\n      <Container style={{ padding: '3em' }}>\n        <Image centered size='large' src={photo && photo} />\n        {/* <About  /> */}\n        <Divider hidden />\n\n        <ShowMenu\n          loadUser={this.props.loadUser}\n          loadingHandler={this.props.loadingHandler}\n          loading={this.props.loading}\n          favorite={this.state.favorite}\n          rate={this.rate}\n          doctor={this.props.doctorShow}\n          reviews={reviews}\n          photos={photos}\n        />\n      </Container>\n    );\n  }\n}\n\nexport default DoctorShow;\n"]},"metadata":{},"sourceType":"module"}