{"ast":null,"code":"var _jsxFileName = \"/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/components/doctorShow/DoctorShow.js\";\nimport React from 'react';\nimport { Grid, Divider, Image, Container } from 'semantic-ui-react';\nimport axios from 'axios';\nimport Photos from './Photos';\nimport Reviews from './Reviews';\nimport About from './About';\nimport Menu from './Menu';\n\nclass DoctorShow extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      favorite: 0\n    };\n\n    this.isFavorite = () => {\n      const favorite = this.props.currentUser.doctors.find(doc => doc.id === parseInt(this.props.match.params.id));\n      if (favorite) this.setState({\n        favorite: 1\n      });\n    };\n\n    this.postFavorite = async () => {\n      const favoriteObject = {\n        doctor_id: this.props.match.params.id,\n        user_id: this.props.currentUser.id\n      };\n\n      try {\n        let res = await axios.post(`http://localhost:3000/favorites`, favoriteObject);\n        this.setState({\n          favorite: 1,\n          id: res.data.id\n        }, () => {\n          this.props.loadUser();\n        });\n        console.log(res.data);\n      } catch (error) {}\n    };\n\n    this.deleteFavorite = async () => {\n      let favorite = this.props.currentUser.favorites.find(favorite => favorite.doctor_id === parseInt(this.props.match.params.id));\n\n      if (favorite === -1) {\n        this.setState({\n          favorite: 0\n        });\n      }\n\n      try {\n        let res = await axios.delete(`http://localhost:3000/favorites/${favorite.id}`);\n        console.log('res.data from deletefavorite', res.data);\n        this.setState({\n          favorite: 0,\n          id: null\n        }, () => {\n          this.props.loadUser();\n        });\n      } catch (err) {\n        console.log('error', err);\n      }\n\n      console.log('got here in delete');\n    };\n\n    this.rate = (e, {\n      rating\n    }) => {\n      if (rating === 0) {\n        this.deleteFavorite();\n      } else {\n        this.postFavorite();\n      }\n    };\n  }\n\n  async componentDidMount() {\n    await this.props.getDoctorById(parseInt(this.props.match.params.id));\n    await this.props.loadUser();\n    this.isFavorite();\n  }\n\n  render() {\n    console.log('DOCTOR SHOW THIS.STATE: ', this.state); // debugger\n\n    const {\n      reviews,\n      photos,\n      photo\n    } = this.props.doctorShow;\n    return React.createElement(Container, {\n      style: {\n        padding: '3rem'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(Image, {\n      centered: true,\n      size: \"large\",\n      src: photo && photo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(About, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }), React.createElement(Menu, {\n      favorite: this.state.favorite,\n      rate: this.rate,\n      doctor: this.props.doctorShow,\n      reviews: reviews,\n      photos: photos,\n      doctor: this.props.doctorShow,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(Grid, {\n      columns: 2,\n      centered: true,\n      textAlign: \"center\",\n      style: {\n        height: '100vh'\n      },\n      verticalAlign: \"top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Reviews, {\n      reviews: reviews,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }), React.createElement(Photos, {\n      photos: photos,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default DoctorShow;","map":{"version":3,"sources":["/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/components/doctorShow/DoctorShow.js"],"names":["React","Grid","Divider","Image","Container","axios","Photos","Reviews","About","Menu","DoctorShow","Component","state","favorite","isFavorite","props","currentUser","doctors","find","doc","id","parseInt","match","params","setState","postFavorite","favoriteObject","doctor_id","user_id","res","post","data","loadUser","console","log","error","deleteFavorite","favorites","delete","err","rate","e","rating","componentDidMount","getDoctorById","render","reviews","photos","photo","doctorShow","padding","height"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Grid, Divider, Image, Container } from 'semantic-ui-react';\nimport axios from 'axios';\nimport Photos from './Photos';\nimport Reviews from './Reviews';\nimport About from './About';\nimport Menu from './Menu';\n\nclass DoctorShow extends React.Component {\n  state = {\n    favorite: 0,\n  };\n\n  isFavorite = () => {\n    const favorite = this.props.currentUser.doctors.find(\n      (doc) => doc.id === parseInt(this.props.match.params.id)\n    );\n    if (favorite) this.setState({ favorite: 1 });\n  };\n\n  async componentDidMount() {\n    await this.props.getDoctorById(parseInt(this.props.match.params.id));\n    await this.props.loadUser();\n    this.isFavorite();\n  }\n\n  postFavorite = async () => {\n    const favoriteObject = {\n      doctor_id: this.props.match.params.id,\n      user_id: this.props.currentUser.id,\n    };\n    try {\n      let res = await axios.post(\n        `http://localhost:3000/favorites`,\n        favoriteObject\n      );\n      this.setState({ favorite: 1, id: res.data.id }, () => {\n        this.props.loadUser();\n      });\n      console.log(res.data);\n    } catch (error) {}\n  };\n\n  deleteFavorite = async () => {\n    let favorite = this.props.currentUser.favorites.find(\n      (favorite) => favorite.doctor_id === parseInt(this.props.match.params.id)\n    );\n    if (favorite === -1) {\n      this.setState({ favorite: 0 });\n    }\n    try {\n      let res = await axios.delete(\n        `http://localhost:3000/favorites/${favorite.id}`\n      );\n      console.log('res.data from deletefavorite', res.data);\n      this.setState({ favorite: 0, id: null }, () => {\n        this.props.loadUser();\n      });\n    } catch (err) {\n      console.log('error', err);\n    }\n\n    console.log('got here in delete');\n  };\n\n  rate = (e, { rating }) => {\n    if (rating === 0) {\n      this.deleteFavorite();\n    } else {\n      this.postFavorite();\n    }\n  };\n\n  render() {\n    console.log('DOCTOR SHOW THIS.STATE: ', this.state);\n    // debugger\n    const {\n\n      reviews,\n      photos,\n      photo,\n    } = this.props.doctorShow;\n\n    return (\n      <Container style={{ padding: '3rem' }}>\n        <Image centered size='large' src={photo && photo} />\n        <About  />\n        <Divider hidden />\n\n        <Menu favorite={this.state.favorite} rate={this.rate} doctor={this.props.doctorShow} reviews={reviews} photos={photos} doctor={this.props.doctorShow} />\n\n        <Grid\n          columns={2}\n          centered\n          textAlign='center'\n          style={{ height: '100vh' }}\n          verticalAlign='top'\n        >\n          <Reviews reviews={reviews} />\n          <Photos photos={photos} />\n        </Grid>\n      </Container>\n    );\n  }\n}\n\nexport default DoctorShow;\n"]},"metadata":{},"sourceType":"module"}