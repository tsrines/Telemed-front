{"ast":null,"code":"var _jsxFileName = \"/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/components/DoctorShow.js\";\nimport React from 'react';\nimport { Grid, Rating, Header, Message, Divider, Segment, Image, GridColumn } from 'semantic-ui-react';\nimport axios from 'axios';\n\nclass DoctorShow extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      favorite: 0,\n      currentUser: null,\n      doc: {},\n      id: null\n    };\n\n    this.isFavorite = () => {\n      const favorite = this.props.currentUser.doctors.find(doc => doc.id === parseInt(this.props.match.params.id));\n      if (favorite) this.setState({\n        favorite: 1\n      });\n    };\n\n    this.postFavorite = async () => {\n      const favoriteObject = {\n        doctor_id: this.props.match.params.id,\n        user_id: this.props.currentUser.id\n      };\n\n      try {\n        let res = await axios.post(`http://localhost:3000/favorites`, favoriteObject);\n        this.setState({\n          favorite: 1,\n          id: res.data.id\n        }, () => {\n          this.props.loadUser();\n        });\n        console.log(res.data);\n      } catch (error) {}\n    };\n\n    this.deleteFavorite = async () => {\n      let favorite = this.props.currentUser.favorites.find(favorite => favorite.doctor_id === parseInt(this.props.match.params.id));\n\n      if (favorite === -1) {\n        this.setState({\n          favorite: 0\n        });\n      }\n\n      try {\n        let res = await axios.delete(`http://localhost:3000/favorites/${favorite.id}`);\n        console.log('res.data from deletefavorite', res.data);\n        this.setState({\n          favorite: 0,\n          id: null\n        }, () => {\n          this.props.loadUser();\n        });\n      } catch (err) {\n        console.log('error', err);\n      }\n\n      console.log('got here in delete');\n    };\n\n    this.rate = (e, {\n      rating\n    }) => {\n      if (rating === 0) {\n        this.deleteFavorite();\n      } else {\n        this.postFavorite();\n      }\n    };\n  }\n\n  async componentDidMount() {\n    await this.props.getDoctorById(parseInt(this.props.match.params.id));\n    await this.props.loadUser();\n    this.isFavorite(); // if(this.props.currentUser.doctors.includes(this.props.doctorShow)) this.setState({favorite: 1})\n  }\n\n  render() {\n    console.log('DOCTOR SHOW THIS.STATE: ', this.state); // debugger\n\n    const {\n      name,\n      formatted_phone_number,\n      formatted_address,\n      rating,\n      url,\n      website,\n      reviews,\n      photos\n    } = this.props.doctorShow;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(Segment, {\n      textAlign: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: website,\n      rel: \"noopener noreferrer\",\n      target: \"_blank\",\n      to: website,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, name, React.createElement(Image, {\n      src: photos[0],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }))), React.createElement(Rating, {\n      onRate: (e, data) => this.rate(e, data),\n      icon: \"heart\",\n      rating: this.state.favorite,\n      maxRating: 1,\n      size: \"huge\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Message, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      rel: \"noopener noreferrer\",\n      href: `tel:${formatted_phone_number}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, formatted_phone_number)), React.createElement(Message, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: url,\n      rel: \"noopener no referrer\",\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, formatted_address)), rating && React.createElement(Message, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \"Average Rating: \", rating)), React.createElement(Grid, {\n      columns: 2,\n      textAlign: \"center\" // style={{ height: '100vh' }}\n      ,\n      verticalAlign: \"top\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    }, React.createElement(Grid.Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, reviews && reviews.map(review => React.createElement(Message, {\n      key: review.author_name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, review.author_name)), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, review.text)))), photos && photos.map(photo => React.createElement(Image, {\n      size: \"medium\",\n      key: photo.id,\n      alt: \"\",\n      src: photo.slug,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default DoctorShow;","map":{"version":3,"sources":["/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/components/DoctorShow.js"],"names":["React","Grid","Rating","Header","Message","Divider","Segment","Image","GridColumn","axios","DoctorShow","Component","state","favorite","currentUser","doc","id","isFavorite","props","doctors","find","parseInt","match","params","setState","postFavorite","favoriteObject","doctor_id","user_id","res","post","data","loadUser","console","log","error","deleteFavorite","favorites","delete","err","rate","e","rating","componentDidMount","getDoctorById","render","name","formatted_phone_number","formatted_address","url","website","reviews","photos","doctorShow","map","review","author_name","text","photo","slug"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Grid,\n  Rating,\n  Header,\n  Message,\n  Divider,\n  Segment,\n  Image,\n  GridColumn,\n} from 'semantic-ui-react';\nimport axios from 'axios';\n\nclass DoctorShow extends React.Component {\n  state = {\n    favorite: 0,\n    currentUser: null,\n    doc: {},\n    id: null,\n  };\n\n  isFavorite = () => {\n    const favorite = this.props.currentUser.doctors.find(\n      (doc) => doc.id === parseInt(this.props.match.params.id)\n    );\n    if (favorite) this.setState({ favorite: 1 });\n  };\n\n  async componentDidMount() {\n    await this.props.getDoctorById(parseInt(this.props.match.params.id));\n    await this.props.loadUser();\n    this.isFavorite();\n\n    // if(this.props.currentUser.doctors.includes(this.props.doctorShow)) this.setState({favorite: 1})\n  }\n\n  postFavorite = async () => {\n    const favoriteObject = {\n      doctor_id: this.props.match.params.id,\n      user_id: this.props.currentUser.id,\n    };\n    try {\n      let res = await axios.post(\n        `http://localhost:3000/favorites`,\n        favoriteObject\n      );\n      this.setState({ favorite: 1, id: res.data.id }, () => {\n        this.props.loadUser();\n      });\n      console.log(res.data);\n    } catch (error) {}\n  };\n\n  deleteFavorite = async () => {\n    let favorite = this.props.currentUser.favorites.find(\n      (favorite) => favorite.doctor_id === parseInt(this.props.match.params.id)\n    );\n    if (favorite === -1) {\n      this.setState({ favorite: 0 });\n    }\n    try {\n      let res = await axios.delete(\n        `http://localhost:3000/favorites/${favorite.id}`\n      );\n      console.log('res.data from deletefavorite', res.data);\n      this.setState({ favorite: 0, id: null }, () => {\n        this.props.loadUser();\n      });\n    } catch (err) {\n      console.log('error', err);\n    }\n\n    console.log('got here in delete');\n  };\n\n  rate = (e, { rating }) => {\n    if (rating === 0) {\n      this.deleteFavorite();\n    } else {\n      this.postFavorite();\n    }\n  };\n\n  render() {\n    console.log('DOCTOR SHOW THIS.STATE: ', this.state);\n    // debugger\n    const {\n      name,\n      formatted_phone_number,\n      formatted_address,\n      rating,\n      url,\n      website,\n      reviews,\n      photos,\n    } = this.props.doctorShow;\n\n    return (\n      <div>\n\n              <Segment textAlign='center'>\n                <Header >\n                  <a\n                    href={website}\n                    rel='noopener noreferrer'\n                    target='_blank'\n                    to={website}\n                  >\n                    {name}<Image src={photos[0]}></Image>\n                  </a>\n                </Header>\n                <Rating\n                  onRate={(e, data) => this.rate(e, data)}\n                  icon='heart'\n                  rating={this.state.favorite}\n                  maxRating={1}\n                  size='huge'\n                />\n                <Divider />\n                <Message>\n                  <a\n                    rel='noopener noreferrer'\n                    href={`tel:${formatted_phone_number}`}\n                  >\n                    {formatted_phone_number}\n                  </a>\n                </Message>\n                <Message>\n                  <a href={url} rel='noopener no referrer' target='_blank'>\n                    {formatted_address}\n                  </a>\n                </Message>\n\n                {rating && <Message>Average Rating: {rating}</Message>}\n    \n              </Segment>\n\n        <Grid\n          columns={2}\n          textAlign='center'\n          // style={{ height: '100vh' }}\n          verticalAlign=\"top\"\n        >\n\n            <Grid.Row>\n              {reviews &&\n                reviews.map((review) => (\n\n                    <Message key={review.author_name}>\n                      <span>\n                        <strong>{review.author_name}</strong>\n                      </span>\n                      <p>{review.text}</p>\n                    </Message>\n\n                ))}\n            </Grid.Row>\n\n              {photos &&\n                photos.map((photo) => (\n                  <Image\n                    size='medium'\n                    key={photo.id}\n                    alt=''\n                    src={photo.slug}\n                  ></Image>\n                ))}\n\n\n        </Grid>\n      </div>\n    );\n  }\n}\n\nexport default DoctorShow;\n"]},"metadata":{},"sourceType":"module"}