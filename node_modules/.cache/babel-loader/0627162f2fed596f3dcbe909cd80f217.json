{"ast":null,"code":"import React from 'react';\nimport axios from 'axios';\nexport const fetchApiDoctors = async payload => {\n  const {\n    address,\n    query,\n    distance,\n    lat,\n    lng\n  } = payload;\n  let data;\n\n  try {\n    let res = await axios.get(`http://localhost:3000/geocodes/nearby/?address=${address}&query=${query}&distance=${distance}&lat=${lat}&lng=${lng}`);\n    data = res.data.results;\n  } catch (err) {\n    console.log('This is your error:', err);\n    throw err;\n  }\n\n  return data;\n};\nexport const createDoctors = async incomingDoctors => {\n  const docArray = [];\n  incomingDoctors.each(async doctor => {\n    let finalDoc = await createDoctor(doctor);\n    docArray.push(finalDoc.data);\n    console.log(finalDoc.data, \"FINAL DOC.DATA FROM CREATEDOCTORS\");\n    return finalDoc;\n  });\n};\n\nconst createDoctor = async singleDoctor => {\n  let detailedDoctor;\n  let doctorFromBackend;\n\n  try {\n    let res = await axios.get(`http://localhost:3000/geocodes/details/${singleDoctor.place_id}`);\n    detailedDoctor = res.data.result;\n  } catch (err) {\n    console.log(err, 'FROM CREATEDOCTORS HELPER');\n    throw err;\n  }\n\n  const {\n    formatted_address,\n    formatted_phone_number,\n    name,\n    place_id,\n    rating,\n    url,\n    website,\n    user_ratings_total,\n    reviews,\n    photos,\n    geometry: {\n      location: {\n        lat,\n        lng\n      }\n    }\n  } = detailedDoctor; // ES6 key value assignment operator\n\n  const doctorHash = {\n    place_id,\n    name,\n    formatted_address,\n    rating,\n    user_ratings_total,\n    formatted_phone_number,\n    lat,\n    lng,\n    url,\n    website,\n    photos,\n    reviews\n  };\n  let res = await axios.post('http://localhost:3000/doctors', doctorHash);\n  doctorFromBackend = res.data;\n  let createdReviews = await createReviews(doctorFromBackend, reviews);\n  let createdPhotos = await createPhotos(doctorFromBackend.place_id);\n  doctorFromBackend.reviews = createdReviews;\n  doctorFromBackend.photos = createdPhotos;\n  return doctorFromBackend;\n};\n\nconst createReviews = async (reviews, doctorFromBackend) => {\n  const revs = [];\n  reviews.forEach(async singleReview => {\n    revs.push((await createReview(singleReview, doctorFromBackend)));\n  });\n  return revs;\n};\n\nconst createReview = async (singleReview, doctorFromBackend) => {\n  const {\n    author_name,\n    author_url,\n    profile_photo_url,\n    rating,\n    relative_time_description,\n    text,\n    time\n  } = singleReview;\n  const reviewHash = {\n    author_name,\n    author_url,\n    profile_photo_url,\n    rating,\n    relative_time_description,\n    text,\n    time,\n    place_id,\n    doctor_id: doctorFromBackend.id\n  };\n\n  try {\n    let res = await axios.post('http://localhost:3000/reviews', reviewHash);\n    return res.data;\n  } catch (error) {\n    console.log(err);\n    throw err;\n  }\n};\n\nconst createPhotos = async ({\n  doctorId,\n  placeId\n}) => {\n  let data = [];\n  const myHeaders = new Headers();\n  const photoHash = {\n    doctor_id: doctorId,\n    doctor_reference: placeId\n  };\n\n  try {\n    let res = await axios.post(`http://localhost:3000/photos`, photoHash);\n    data = res.data;\n  } catch (err) {\n    console.log(err);\n    throw err;\n  }\n\n  return data;\n};","map":{"version":3,"sources":["/Users/rines/Development/code/mod5/Telemed/Telemed-front/src/helpers/helpers.js"],"names":["React","axios","fetchApiDoctors","payload","address","query","distance","lat","lng","data","res","get","results","err","console","log","createDoctors","incomingDoctors","docArray","each","doctor","finalDoc","createDoctor","push","singleDoctor","detailedDoctor","doctorFromBackend","place_id","result","formatted_address","formatted_phone_number","name","rating","url","website","user_ratings_total","reviews","photos","geometry","location","doctorHash","post","createdReviews","createReviews","createdPhotos","createPhotos","revs","forEach","singleReview","createReview","author_name","author_url","profile_photo_url","relative_time_description","text","time","reviewHash","doctor_id","id","error","doctorId","placeId","myHeaders","Headers","photoHash","doctor_reference"],"mappings":"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","sourcesContent":["import React from 'react';\nimport axios from 'axios';\n\nexport const fetchApiDoctors = async (payload) => {\n  const { address, query, distance, lat, lng } = payload;\n  let data;\n  try {\n    let res = await axios.get(\n      `http://localhost:3000/geocodes/nearby/?address=${address}&query=${query}&distance=${distance}&lat=${lat}&lng=${lng}`\n    );\n\n    data = res.data.results;\n  } catch (err) {\n    console.log('This is your error:', err);\n    throw err;\n  }\n  return data;\n};\n\nexport const createDoctors = async (incomingDoctors) => {\n  const docArray = []\n  incomingDoctors.each(async (doctor) => {\n    let finalDoc = await createDoctor(doctor);\n    docArray.push(finalDoc.data)\n    console.log(finalDoc.data, \"FINAL DOC.DATA FROM CREATEDOCTORS\")\n\n    return finalDoc;\n  });\n  \n};\n\nconst createDoctor = async (singleDoctor) => {\n  let detailedDoctor;\n  let doctorFromBackend;\n  try {\n    let res = await axios.get(\n      `http://localhost:3000/geocodes/details/${singleDoctor.place_id}`\n    );\n    detailedDoctor = res.data.result;\n  } catch (err) {\n    console.log(err, 'FROM CREATEDOCTORS HELPER');\n    throw err;\n  }\n\n  const {\n    formatted_address,\n    formatted_phone_number,\n    name,\n    place_id,\n    rating,\n    url,\n    website,\n    user_ratings_total,\n    reviews,\n    photos,\n    geometry: {\n      location: { lat, lng },\n    },\n  } = detailedDoctor;\n\n  // ES6 key value assignment operator\n\n  const doctorHash = {\n    place_id,\n    name,\n    formatted_address,\n    rating,\n    user_ratings_total,\n    formatted_phone_number,\n    lat,\n    lng,\n    url,\n    website,\n    photos,\n    reviews,\n  };\n\n  let res = await axios.post('http://localhost:3000/doctors', doctorHash);\n  doctorFromBackend = res.data;\n  let createdReviews = await createReviews(doctorFromBackend, reviews);\n  let createdPhotos = await createPhotos(doctorFromBackend.place_id);\n  doctorFromBackend.reviews = createdReviews;\n  doctorFromBackend.photos = createdPhotos;\n  return doctorFromBackend;\n};\n\nconst createReviews = async (reviews, doctorFromBackend) => {\n  const revs = [];\n  reviews.forEach(async (singleReview) => {\n    revs.push(await createReview(singleReview, doctorFromBackend));\n  });\n  return revs;\n};\n\nconst createReview = async (singleReview, doctorFromBackend) => {\n  const {\n    author_name,\n    author_url,\n    profile_photo_url,\n    rating,\n    relative_time_description,\n    text,\n    time,\n  } = singleReview;\n  const reviewHash = {\n    author_name,\n    author_url,\n    profile_photo_url,\n    rating,\n    relative_time_description,\n    text,\n    time,\n    place_id,\n    doctor_id: doctorFromBackend.id,\n  };\n\n  try {\n    let res = await axios.post('http://localhost:3000/reviews', reviewHash);\n    return res.data;\n  } catch (error) {\n    console.log(err);\n    throw err;\n  }\n};\n\nconst createPhotos = async ({ doctorId, placeId }) => {\n  let data = [];\n  const myHeaders = new Headers();\n\n  const photoHash = {\n    doctor_id: doctorId,\n    doctor_reference: placeId,\n  };\n\n  try {\n    let res = await axios.post(`http://localhost:3000/photos`, photoHash);\n\n    data = res.data;\n  } catch (err) {\n    console.log(err);\n    throw err;\n  }\n  return data;\n};\n"]},"metadata":{},"sourceType":"module"}